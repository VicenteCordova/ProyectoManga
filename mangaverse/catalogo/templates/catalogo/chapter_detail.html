{% extends 'base.html' %}
{% load static %}

{% block title %}{{ chapter.title }} | {{ chapter.manga.titulo }}{% endblock %}

{% block content %}
<div class="container py-4 text-center">
  
  <div class="mb-4 d-flex justify-content-between align-items-center flex-wrap gap-2">
    <a href="{% url 'catalogo:manga-detail' chapter.manga.slug %}" class="btn btn-outline-secondary btn-sm rounded-pill px-3">
      â† Volver al Manga
    </a>
    <div class="text-center">
      <h2 class="h6 text-secondary text-uppercase ls-1 mb-0">{{ chapter.manga.titulo }}</h2>
      <h1 class="h5 text-white fw-bold mb-0">CapÃ­tulo {{ chapter.chapter_number }}</h1>
    </div>
    <div style="width: 80px;" class="d-none d-md-block"></div> </div>

  <div class="mx-auto bg-black rounded-3 shadow-lg overflow-hidden border border-secondary border-opacity-25" style="max-width: 900px; min-height: 600px;">
    {% if panels %}
      {% for panel in panels %}
        <img src="{{ panel.image.url }}" class="img-fluid d-block w-100" alt="PÃ¡gina {{ panel.page_number }}" loading="lazy">
      {% endfor %}
    {% else %}
      <div class="py-5 text-white-50 d-flex flex-column align-items-center justify-content-center h-100">
        <span class="fs-1 mb-3">ğŸ“„</span>
        <p>Este capÃ­tulo no tiene pÃ¡ginas cargadas.</p>
        {% if user.is_superuser or user == chapter.manga.owner %}
           <a href="{% url 'catalogo:manga-update' chapter.manga.slug %}" class="btn btn-sm btn-primary">Subir pÃ¡ginas</a>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <div class="mt-5 d-flex justify-content-center gap-3">
    {% if prev_chapter %}
      <a href="{% url 'catalogo:chapter-detail' chapter.manga.slug prev_chapter.slug %}" class="btn btn-outline-light rounded-pill px-4 hover-lift">
        â† Anterior
      </a>
    {% else %}
      <button class="btn btn-outline-secondary rounded-pill px-4 opacity-50" disabled>â† Anterior</button>
    {% endif %}

    {% if next_chapter %}
      <a href="{% url 'catalogo:chapter-detail' chapter.manga.slug next_chapter.slug %}" class="btn btn-brand-neon rounded-pill px-5 fw-bold text-dark shadow-neon hover-lift">
        Siguiente â†’
      </a>
    {% else %}
      <a href="{% url 'catalogo:manga-detail' chapter.manga.slug %}" class="btn btn-secondary rounded-pill px-5 fw-bold hover-lift">
        Finalizar
      </a>
    {% endif %}
  </div>

</div>

<style>
  .hover-lift:hover { transform: translateY(-3px); transition: transform 0.2s; }
  .ls-1 { letter-spacing: 1px; }
</style>
{% endblock %}